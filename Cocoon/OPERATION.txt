The Feb 1 update of vicar lets a user upload input xml files, convert them using Abbot, and download the results.

Vicar is running on abbot at;

http://abbot.unl.edu:8080/cocoon/blueorchid/Core/Simple.html

It is intended to serve as a proof of concept for the final web product.  It is not pretty in form nor in code and needs significant refactoring and annotation.
It's purpose is not yet to be a design for vicar but to be a framework on which to display and test various components.  Vicar's useful form will be designed and built at a later time.

******


Vicar allows users to log in via google or yahoo.  Once in, the user will find three menu choices; Intro, Upload Files via HTML5, and Use Abbot.  For now, ignore the first two choices.  The Upload Files via HTML5 relies on a servlet and, for debugging purposes, it is not yet integrated with the Use Abbot functionality.  (Debugging cocoon generators and servlets concurrently would expand the complexity for development and testing). 

'Use Abbot' will take you to a page to display your uploaded collections.  To create a collection, click on 'Create New Collection.'  You will be asked to enter a collection name.  Enter any name containing only letters a-z and A-Z with no spaces (for now, this could be made more flexible in the future) and press Save.  You will then be asked to add files to this collection.  Click browse, select an input xml file, and press Upload.  (This only allows single file upload as the multiple upload facility is not yet integrated with this code).  Add as many files to the collection as you wish

You can also upload a zip file containing multiple xml files.  You will be presented with an 'unzip' link.  Click on the link and the contents of the zip file will then show in this collection.

You can click on 'Collections' to go to your list of collections.  You can click on a collection name to see its contents.  Click on a collection's red X to delete the collection and the files.

Once you have files in your collection you will see 3 green 'greater than' arrows.  Click on the arrows to invoke abbot.  Abbot will populate an output directory with the result of it's run.  If there are multiple files in the output, you will be given an option to package them into a single zip file.  Clicking on an individual xml file send it to your browser.  Use Ctrl click to 'Save Link As' and download the output file.  Clicking on the zip file should automaticall y give you an option to save the zip file.

The files are stored on abbot in /tmp/vicar/[slight_munge_of_your_email_addr]/[collection_name]/.  This path contains an input and output directory.

Please give it a test run.  Input files for now should not exceed 3MB.




Core contains the code to produce Simple.html which is the general framework.  OpenSignin allows users to sign in with their Yahoo or Google id.  This depends on the JOpenId-1.08.jar file from http://code.google.com/p/jopenid/ being in the cocoon install's WEB-INF/lib/ directory.
FileManager.java needs abbot-0.3.3-standalone.jar in WEB/lib/ directory.

