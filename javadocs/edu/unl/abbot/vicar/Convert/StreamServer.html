<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_04) on Wed Jan 23 16:38:39 CST 2013 -->
<title>StreamServer</title>
<meta name="date" content="2013-01-23">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StreamServer";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/unl/abbot/vicar/Convert/ProcMngr.html" title="class in edu.unl.abbot.vicar.Convert"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/unl/abbot/vicar/Convert/StreamServer.html" target="_top">Frames</a></li>
<li><a href="StreamServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.apache.cocoon.generation.ServletGenerator">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.unl.abbot.vicar.Convert</div>
<h2 title="Class StreamServer" class="title">Class StreamServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.apache.avalon.framework.logger.AbstractLogEnabled</li>
<li>
<ul class="inheritance">
<li>org.apache.cocoon.xml.AbstractXMLProducer</li>
<li>
<ul class="inheritance">
<li>org.apache.cocoon.generation.AbstractGenerator</li>
<li>
<ul class="inheritance">
<li>org.apache.cocoon.generation.ComposerGenerator</li>
<li>
<ul class="inheritance">
<li>org.apache.cocoon.generation.ServletGenerator</li>
<li>
<ul class="inheritance">
<li>edu.unl.abbot.vicar.Convert.StreamServer</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.apache.avalon.excalibur.pool.Poolable, org.apache.avalon.excalibur.pool.Recyclable, org.apache.avalon.framework.activity.Disposable, org.apache.avalon.framework.component.Component, org.apache.avalon.framework.component.Composable, org.apache.avalon.framework.logger.LogEnabled, org.apache.cocoon.generation.Generator, org.apache.cocoon.sitemap.SitemapModelComponent, org.apache.cocoon.xml.XMLProducer</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">StreamServer</span>
extends org.apache.cocoon.generation.ServletGenerator
implements org.apache.avalon.framework.activity.Disposable</pre>
<div class="block">A Generator which launches conversion, correction, and validation of data files via AbbotConvert.java and reports progress.
 <br />
 If no directory path or no conversion schema is provided then this method generates XML containing an error message and returns it via an ServletOutputStream.
 If all necessary information is supplied then <a href="../../../../../edu/unl/abbot/vicar/Convert/AbbotConvert.html" title="class in edu.unl.abbot.vicar.Convert"><code>AbbotConvert</code></a> is called as a separate thread.  This thread continues and monitors the progress of AbbotConvert which includes Abbot and then validation.
 <br />
 Under normal operation with javascript enabled this generator is used only by StreamClient.html.
 <br />
 This thread responds with XML output in a 'long polling' scheme such that it does not terminate until all actions are complete.  The XML stream pauses while there is no change in status and the HTTP connection is kept open.
 <br />
 If javascript is not enabled then Vicar.html will call StreamServer.java directly to produce StreamServer.html.  This call will use the parameter act=noblock.
 This will launch the AbbotConvert thread and immediately return an XML response which contains an attribute of mode=0.  This 0 mode results in StreamServer.html calling itself again with parameter act=join which blocks and waits for the completion of the AbbotConvert thread.  Once the act=join call is complete StreamServer.java:generate() returns with an XML response with mode=1 which results in StreamServer.html returning the browser to the Vicar.html page.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>0.8, 12/15/2012</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Frank Smutniak, Center for Digital Research in the Humanities, http://cdrh.unl.edu</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.cocoon.generation.ServletGenerator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.cocoon.generation.ServletGenerator</h3>
<code>context, request, response</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.cocoon.generation.ComposerGenerator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.cocoon.generation.ComposerGenerator</h3>
<code>manager</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.cocoon.generation.AbstractGenerator">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.cocoon.generation.AbstractGenerator</h3>
<code>objectModel, parameters, resolver, source</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.cocoon.xml.AbstractXMLProducer">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.cocoon.xml.AbstractXMLProducer</h3>
<code>contentHandler, EMPTY_CONTENT_HANDLER, lexicalHandler, xmlConsumer</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.apache.cocoon.generation.Generator">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.apache.cocoon.generation.Generator</h3>
<code>ROLE</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#StreamServer()">StreamServer</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#compose(org.apache.avalon.framework.component.ComponentManager)">compose</a></strong>(org.apache.avalon.framework.component.ComponentManager&nbsp;manager)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#dispose()">dispose</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#generate()">generate</a></strong>()</code>
<div class="block">Responds with XML based on how it is called.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#recycle()">recycle</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/unl/abbot/vicar/Convert/StreamServer.html#setup(org.apache.cocoon.environment.SourceResolver, java.util.Map, java.lang.String, org.apache.avalon.framework.parameters.Parameters)">setup</a></strong>(org.apache.cocoon.environment.SourceResolver&nbsp;resolver,
     java.util.Map&nbsp;objectModel,
     java.lang.String&nbsp;src,
     org.apache.avalon.framework.parameters.Parameters&nbsp;par)</code>
<div class="block">Collects session attributes and parameters <i>userid, userpath, Conversion Directory, Data Directory, and Action.</i></div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.cocoon.xml.AbstractXMLProducer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.cocoon.xml.AbstractXMLProducer</h3>
<code>setConsumer, setContentHandler, setLexicalHandler</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.avalon.framework.logger.AbstractLogEnabled">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.avalon.framework.logger.AbstractLogEnabled</h3>
<code>enableLogging, getLogger, setupLogger, setupLogger, setupLogger</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.cocoon.xml.XMLProducer">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.apache.cocoon.xml.XMLProducer</h3>
<code>setConsumer</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="StreamServer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>StreamServer</h4>
<pre>public&nbsp;StreamServer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="dispose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dispose</h4>
<pre>public&nbsp;void&nbsp;dispose()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>dispose</code>&nbsp;in interface&nbsp;<code>org.apache.avalon.framework.activity.Disposable</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>dispose</code>&nbsp;in class&nbsp;<code>org.apache.cocoon.generation.ComposerGenerator</code></dd>
</dl>
</li>
</ul>
<a name="recycle()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recycle</h4>
<pre>public&nbsp;void&nbsp;recycle()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>recycle</code>&nbsp;in interface&nbsp;<code>org.apache.avalon.excalibur.pool.Recyclable</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>recycle</code>&nbsp;in class&nbsp;<code>org.apache.cocoon.generation.ServletGenerator</code></dd>
</dl>
</li>
</ul>
<a name="compose(org.apache.avalon.framework.component.ComponentManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compose</h4>
<pre>public&nbsp;void&nbsp;compose(org.apache.avalon.framework.component.ComponentManager&nbsp;manager)
             throws org.apache.avalon.framework.component.ComponentException</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>compose</code>&nbsp;in interface&nbsp;<code>org.apache.avalon.framework.component.Composable</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>compose</code>&nbsp;in class&nbsp;<code>org.apache.cocoon.generation.ComposerGenerator</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.apache.avalon.framework.component.ComponentException</code></dd></dl>
</li>
</ul>
<a name="setup(org.apache.cocoon.environment.SourceResolver, java.util.Map, java.lang.String, org.apache.avalon.framework.parameters.Parameters)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setup</h4>
<pre>public&nbsp;void&nbsp;setup(org.apache.cocoon.environment.SourceResolver&nbsp;resolver,
         java.util.Map&nbsp;objectModel,
         java.lang.String&nbsp;src,
         org.apache.avalon.framework.parameters.Parameters&nbsp;par)</pre>
<div class="block">Collects session attributes and parameters <i>userid, userpath, Conversion Directory, Data Directory, and Action.</i></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>setup</code>&nbsp;in interface&nbsp;<code>org.apache.cocoon.sitemap.SitemapModelComponent</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>setup</code>&nbsp;in class&nbsp;<code>org.apache.cocoon.generation.ServletGenerator</code></dd>
</dl>
</li>
</ul>
<a name="generate()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>generate</h4>
<pre>public&nbsp;void&nbsp;generate()
              throws org.xml.sax.SAXException,
                     org.apache.cocoon.ProcessingException</pre>
<div class="block">Responds with XML based on how it is called.
 See class level description for more information.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>generate</code>&nbsp;in interface&nbsp;<code>org.apache.cocoon.generation.Generator</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>org.apache.cocoon.ProcessingException</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/unl/abbot/vicar/Convert/ProcMngr.html" title="class in edu.unl.abbot.vicar.Convert"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/unl/abbot/vicar/Convert/StreamServer.html" target="_top">Frames</a></li>
<li><a href="StreamServer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.apache.cocoon.generation.ServletGenerator">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
